---
layout: post
title: "Rust覚書"
categories:
  - rust
---

Rustを触ってみたのでその覚書

## 変数
変数には、可変と不変が有り、基本は不変

```rust
// immutable
let x = 10;
x = 5 // compile error
```
```rust
// mutable
let mut x = 10;
x = 5; // ok
```

また、参照渡の場合も、基本は不変であるため、可変の場合は明記する必要がある  
`Java` や `Dart` で言う所の `final`かな

```rust
let mut x = 10;

// immutable
foo(&x);

// mutable
foo(&mut x);
```

### Shadowing
変数名を使いまわして使うことが可能  
`guess_str`, `guess_num`とするところを、 `guess`のみで利用可能  
変数を上書きするため、型も変更可能

`JavaScript` や `PHP` のどんな型でも入る性質とは別物なのに注意  
型は一意に定まる  
同じ変数名で宣言し直しているだけ

```rust
let mut guess = String::new();

io::stdin().read_line(&mut guess)
    .expect("Failed to read line");

let guess: u32 = guess.trim().parse()
    .expect("Please type a number!");

println!("You guessed: {}", guess);
```

## 定数
可変変数とは別に定数も存在している  
可読性のために数値に `under score` を付けることも可能

```rust
const MAX_POINTS = 1_000_000;
```

## 整数

`arch` はアーキテクチャ依存  
`go` で言う所の `int`, `uint`に当たる

| Length | Signed | Unsigned |
| --- | --- | --- |
| 8-bit | i8 | u8 |
| 16-bit | i16 | u16 |
| 32-bit | i32 | u32 |
| 64-bit | i64 | u64 |
| 128-bit | i128 | u128 |
| arch | isize | usize |

Rust の整数型のデフォルトは `i32`で、
`64-bit`環境でも最速らしいので困ったら `i32`  
`isize` や `usize` はインデックスの作成などでよく使うらしい

## 参考
- [The Rust Programming Language: 2. Programming a Guessing Game](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)
- [The Rust Programming Language: 3.2. Data Types](https://doc.rust-lang.org/book/ch03-02-data-types.html)
